{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>To-Do List</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: Arial; max-width: 600px; margin: 20px auto; }
        .task { padding: 10px; margin: 5px; background: #f4f4f4; }
        .completed { text-decoration: line-through; color: gray; }
        .btn { padding: 5px 10px; text-decoration: none; border-radius: 3px; }
        .btn-edit { background: #4CAF50; color: white; }
        .btn-delete { background: #f44336; color: white; }
        .btn-add { background: #2196F3; color: white; }
    </style>
</head>
<body>
    <h1><i class="fas fa-tasks"></i> My To-Do List</h1>
    
    <a href="{% url 'create_task' %}" class="btn btn-add">
        <i class="fas fa-plus"></i> Add New Task
    </a>
    
    <hr>
    
    {% if tasks %}
        <ul>
        {% for task in tasks %}
            <li class="task {% if task.completed %}completed{% endif %}">
                <strong>{{ task.title }}</strong>
                {% if task.description %}
                    <p>{{ task.description }}</p>
                {% endif %}
                
                <div>
                    <a href="{% url 'update_task' task.id %}" class="btn btn-edit">
                        <i class="fas fa-edit"></i> Edit
                    </a>
                    <a href="{% url 'delete_task' task.id %}" class="btn btn-delete">
                        <i class="fas fa-trash"></i> Delete
                    </a>
                </div>
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No tasks yet. Create your first task!</p>
    {% endif %}

	<script>
    // Code JavaScript pour les confirmations de suppression
    document.addEventListener('DOMContentLoaded', function() {
        const deleteButtons = document.querySelectorAll('.btn-delete');
        deleteButtons.forEach(button => {
            button.addEventListener('click', function(e) {
                if (!confirm('Are you sure you want to delete this task?')) {
                    e.preventDefault();
                }
            });
        });
    });
</script>
	<script src="{% static 'tasks/script.js' %}"></script>
</body>
</html>